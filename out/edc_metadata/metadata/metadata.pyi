from ..constants import KEYED as KEYED, NOT_REQUIRED as NOT_REQUIRED, REQUIRED as REQUIRED
from ..models import CrfMetadata as CrfMetadata, RequisitionMetadata as RequisitionMetadata
from django.db.models import Model as Model
from edc_visit_schedule import FormsCollection as FormsCollection
from typing import Any, Optional, Type, Union

class CreatesMetadataError(Exception): ...
class DeleteMetadataError(Exception): ...

class CrfCreator:
    metadata_model: str = ...
    reference_model_cls: Any = ...
    update_keyed: Any = ...
    visit_model_instance: Any = ...
    crf: Any = ...
    def __init__(self, visit_model_instance: Union[CreatesMetadataModelMixin, ReferenceModelMixin, SiteModelMixin, UpdatesMetadataModelMixin, VisitModelMixin]=..., update_keyed: Optional[bool]=..., crf: Any=...) -> None: ...
    @property
    def metadata_model_cls(self) -> Union[Type[CrfMetadata], Type[RequisitionMetadata]]: ...
    @property
    def options(self) -> dict: ...
    @property
    def metadata_obj(self) -> Union[CrfMetadata, RequisitionMetadata]: ...
    def create(self) -> Union[CrfMetadata, RequisitionMetadata]: ...
    @property
    def is_keyed(self) -> bool: ...

class RequisitionCreator(CrfCreator):
    metadata_model: str = ...
    def __init__(self, requisition: Any=..., **kwargs: Any) -> None: ...
    @property
    def requisition(self): ...
    @property
    def options(self) -> dict: ...
    reference_model_cls: Any = ...
    @property
    def is_keyed(self) -> bool: ...

class Creator:
    crf_creator_cls: Any = ...
    requisition_creator_cls: Any = ...
    visit_model_instance: Any = ...
    update_keyed: Any = ...
    visit_code_sequence: Any = ...
    visit: Any = ...
    def __init__(self, visit_model_instance: Union[CreatesMetadataModelMixin, ReferenceModelMixin, SiteModelMixin, UpdatesMetadataModelMixin, VisitModelMixin]=..., update_keyed: Optional[bool]=...) -> None: ...
    @property
    def crfs(self) -> FormsCollection: ...
    @property
    def requisitions(self) -> FormsCollection: ...
    def create(self) -> None: ...
    def create_crf(self, crf: Any) -> CrfMetadata: ...
    def create_requisition(self, requisition: Any) -> RequisitionMetadata: ...

class Destroyer:
    metadata_crf_model: str = ...
    metadata_requisition_model: str = ...
    visit_model_instance: Any = ...
    def __init__(self, visit_model_instance: Union[CreatesMetadataModelMixin, ReferenceModelMixin, SiteModelMixin, UpdatesMetadataModelMixin, VisitModelMixin]=...) -> None: ...
    @property
    def metadata_crf_model_cls(self) -> Type[CrfMetadata]: ...
    @property
    def metadata_requisition_model_cls(self) -> Type[RequisitionMetadata]: ...
    def delete(self) -> int: ...

class Metadata:
    creator_cls: Any = ...
    destroyer_cls: Any = ...
    creator: Any = ...
    destroyer: Any = ...
    reason_field: Any = ...
    reason: Any = ...
    def __init__(self, visit_model_instance: Union[CreatesMetadataModelMixin, ReferenceModelMixin, SiteModelMixin, UpdatesMetadataModelMixin, VisitModelMixin]=..., update_keyed: bool=...) -> None: ...
    def prepare(self) -> bool: ...
